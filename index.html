<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Overlap Insight Platform</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="./styles/main.css?v=1.1">
    <link rel="stylesheet" href="./styles/import.css">
    <link rel="stylesheet" href="./styles/search.css">
</head>

<body>
    <div id="app">
        <!-- Background Elements -->
        <div class="bg-gradient-1"></div>
        <div class="bg-gradient-2"></div>

        <!-- Header -->
        <header class="app-header">
            <div class="container">
                <div class="logo">
                    <span class="logo-icon">◎</span>
                    <h1>Portfolio Overlap Insight</h1>
                </div>
                <div class="user-status">Guest Mode</div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container">
            <!-- Section: Input -->
            <section id="input-section" class="glass-panel">
                <div class="panel-header">
                    <h2>Portfolio Composition</h2>
                    <p class="subtitle">Add your Direct Equity, MF, and ETF holdings to analyze overlap.</p>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" data-tab="manual">Manual Entry</button>
                    <button class="tab-btn" data-tab="import" disabled title="Coming soon in v2">CAS Import
                        (Beta)</button>
                </div>

                <div class="tab-content" id="manual-entry">
                    <form id="add-holding-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="instrument-type">Type</label>
                                <select id="instrument-type" required>
                                    <option value="EQUITY">Stocks</option>
                                    <option value="MF">Mutual Fund</option>
                                    <option value="ETF">ETF</option>
                                </select>
                            </div>
                            <div class="form-group position-relative">
                                <label for="instrument-search">Instrument</label>
                                <input type="text" id="instrument-search" placeholder="Search by name or ticker..."
                                    autocomplete="off" required>
                                <input type="hidden" id="instrument-id">
                                <div id="search-results" class="search-results hidden"></div>
                            </div>
                            <div class="form-group">
                                <label for="market-value">Holding Size (₹)</label>
                                <input type="number" id="market-value" placeholder="e.g. 50000" min="0" step="1"
                                    required>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Add Holding</button>
                    </form>

                    <!-- Holdings List -->
                    <div class="holdings-list-container">
                        <h3>Current Holdings</h3>
                        <div id="holdings-list" class="holdings-list empty">
                            <p class="placeholder-text">No holdings added yet.</p>
                        </div>
                    </div>
                </div>

                <div class="tab-content hidden" id="import-entry">
                    <div class="import-area">
                        <p class="instruction-text">Upload a structured JSON file or paste your portfolio data below.
                        </p>
                        <p class="instruction-subtext">Format:
                            <code>[{"isin": "INE...", "value": 50000, "type": "EQUITY"}]</code>
                        </p>

                        <div class="file-drop-zone" id="drop-zone">
                            <span>Drag & Drop JSON file here or Click to Upload</span>
                            <input type="file" id="file-upload" accept=".json" style="display:none;">
                        </div>

                        <div class="separator">OR</div>

                        <textarea id="import-text" placeholder="Paste JSON data here..." rows="5"></textarea>

                        <button id="process-import-btn" class="btn-primary">Process Import</button>
                        <div id="import-msg" class="import-msg"></div>
                    </div>
                </div>
            </section>

            <!-- Section: Output -->
            <section id="output-section" class="glass-panel">
                <div class="panel-header">
                    <h2>Concentration Snapshot</h2>
                    <p class="subtitle">Exposure breakdown across your portfolio.</p>
                </div>

                <div id="results-area" class="results-area hidden">
                    <div class="summary-cards">
                        <div class="card">
                            <span class="label">Total Portfolio Value</span>
                            <span class="value" id="total-portfolio-value">₹0</span>
                        </div>
                        <div class="card">
                            <span class="label">Top Concentration</span>
                            <span class="value" id="top-concentration-stock">-</span>
                        </div>
                    </div>

                    <div class="concentration-list">
                        <h3>Top 5 Stock Exposures</h3>
                        <div id="exposure-list">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <div class="disclaimer">
                        Investments in securities markets are subject to market risks; the information shown here is for
                        general informational and analytical purposes only and does not constitute investment
                        advice—users must make their own investment decisions.
                    </div>
                </div>

                <div id="empty-state-results" class="empty-state">
                    <p>Add holdings to calculate exposure.</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script type="module" src="./js/app.js?v=1.1"></script>
</body>

</html>